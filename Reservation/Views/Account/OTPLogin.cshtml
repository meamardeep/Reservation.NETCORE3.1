@model Reservation.Data.OTPLogOnModel
@*@{
    Layout = "_LogOnLayout";

}*@
<script>
    $(function () {
        $("#requestOTPId").on("click", getVerificationCode);
    })

    function getVerificationCode() {
        
        var cellNo = $("#CellNo").val();
        
        if (cellNo == 0) {
            $("#spanCellNo").html("Please enter Mobile number");            
            return false;
        }
        
        var url = "/account/getOTP";
        $.post(url, { cellNo: cellNo }, function (data) {
            
            if (data) {
                //$("#OTPSuccessMessage").removeClass("hide");
                $("#requestOTPId").html("Resend code");
            }
        });
    }
</script>
<div class="border shadow rounded-lg container align-items-center mt-5">


    @using (Html.BeginForm("LogOnWithOTP", "Account", FormMethod.Post))
    {
        <div class="form-group pl-5">
            <h4>Login</h4>
        </div>

        <div class="form-group pl-5 pr-5">
            <div>
                @Html.TextBoxFor(m => m.CellNo, new { @class = "form-control", @required = "true", @placeholder = "Mobile number" })
                <span id="spanCellNo" style="color:red"> @Html.ValidationMessageFor(m => m.CellNo)</span>
            </div>
        </div>


        <div class="form-group pl-5 pr-5">
            <div>
                @Html.TextBoxFor(m => m.OTP, new { @class = "form-control", @required = "true", @placeholder = "Enter OTP" })
                <span style="color:red">@Html.ValidationMessageFor(m => m.OTP)</span>
                <div><span class="hide" id="OTPSuccessMessage">OTP send successfully</span>
                <a id="requestOTPId" href="javascript:void(0)" style="text-decoration : none">Get verification code</a></div>
            </div>
        </div>        

        <div class="form-group pl-5 pr-5">
            <div>
                <button type="submit" id="btnLogIn" class="btn btn-primary form-control" style="width:100%;">Verify OTP</button>
            </div>
        </div>


        <div class="text-center">
            <a id="" asp-action="Index" asp-controller="account" style="text-decoration : none">Sign in with Email</a>
        </div>

    }
</div>

<div class="justify-content-center text-center">
    <span>Do not have an account? <a asp-action="ShowSignUpPage" asp-controller="account" style="text-decoration:none">Sign Up</a> </span>

</div>


